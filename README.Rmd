---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "60%",
  fig.width = 5,
  fig.height = 5,
  fig.align = "center",
  dev = "svg",
  fig.ext = "svg",
  out.extra = "style='text-align: center; display: block; margin: auto;'"
)
```


# `tna`: An R package for Transition Network Analysis <img src="man/figures/logo.png" align="right" height="139"/></a>

<!-- badges: start -->
[![Project Status: Active – The project has reached a stable, usable state and is being actively developed.](https://www.repostatus.org/badges/latest/active.svg)](https://www.repostatus.org/#active)
[![R-CMD-check](https://github.com/sonsoleslp/tna/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/sonsoleslp/tna/actions/workflows/R-CMD-check.yaml)
[![Codecov test coverage](https://codecov.io/gh/sonsoleslp/tna/graph/badge.svg)](https://app.codecov.io/gh/sonsoleslp/tna)
[![tna CRAN badge](https://www.r-pkg.org/badges/version/tna)](https://cran.r-project.org/package=tna)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

<!-- badges: end -->

`tna` is an R package for the analysis of relational dynamics through 
Transition Network Analysis (TNA). TNA provides tools for building TNA models, 
plotting transition networks, calculating centrality measures, and identifying 
dominant events and patterns. TNA statistical techniques (e.g., bootstrapping 
and permutation tests) ensure the reliability of observed insights and confirm
that identified dynamics are meaningful. See [(Saqr et al., 2025)](https://doi.org/10.1145/3706468.3706513) for more details on TNA.


![](man/figures/method.png)


## Resources

### Companion tutorials
We have also released comprehensive new tutorials for the main TNA features:

| Tutorial | Link |
|--------|------|
| An Updated Comprehensive Tutorial on Transition Network Analysis (TNA) | https://sonsoles.me/posts/tna-tutorial |
| TNA Group Analysis: Analysis and Comparison of Groups | https://sonsoles.me/posts/tna-group |
| TNA Clustering: Discovering and Analysis of Clusters | https://sonsoles.me/posts/tna-clustering |
| TNA Model Comparison:TNA Model Comparison: A Comprehensive Guide to Network Comparison | https://sonsoles.me/posts/tna-compare |
| Full reference guide on `tna` functions | https://sonsoles.me/tna/tna.html |


### Vignettes
Check out the `tna` R package vignettes:

| Vignette | Link |
|--------|------|
| Getting started with tna | https://sonsoles.me/tna/articles/tna.html |
| A showcase of the main tna functions | https://sonsoles.me/tna/articles/complete_tutorial.html |
| How to prepare data for tna | https://sonsoles.me/tna/articles/prepare_data.html |
| Frequency-based TNA | https://sonsoles.me/tna/articles/ftna.html |
| Attention TNA | https://sonsoles.me/tna/articles/atna.html |
| Finding cliques and communities | https://sonsoles.me/tna/articles/communities_and_cliques.html |
| Using grouped sequence data | https://sonsoles.me/tna/articles/grouped_sequences.html |


### Book chapters
Do not forget to check out our tutorials in the "Advanced learning analytics methods" book:

| Title | Pages | Tutorial |
|-------|-------|----------|
| Saqr, M., Lopez-Pernas, S., & Tikka, S. *Mapping Relational Dynamics with Transition Network Analysis: A Primer and Tutorial*  | https://doi.org/10.1007/978-3-031-95365-1_15 | [Online tutorial](https://lamethods.org/book2/chapters/ch15-tna/ch15-tna.html) |
| Saqr, M., Lopez-Pernas, S., & Tikka, S. *Capturing the Breadth and Dynamics of the Temporal Processes with Frequency Transition Network Analysis: A Primer and Tutorial*   | https://doi.org/10.1007/978-3-031-95365-1_16 | [Online tutorial](https://lamethods.org/book2/chapters/ch16-ftna/ch16-ftna.html) |
| Lopez-Pernas, S., Tikka, S., & Saqr, M. *Mining Patterns and Clusters with Transition Network Analysis: A Heterogeneity Approach*  | https://doi.org/10.1007/978-3-031-95365-1_17 | [Online tutorial](https://lamethods.org/book2/chapters/ch17-tna-clusters/ch17-tna-clusters.html) |

### Other tools

In addition to the `tna` R package, you can also try our [Shiny app](https://sonsoleslp.shinyapps.io/tna-app/) and [Jamovi plugin](https://github.com/sonsoleslp/jTNA).

## Installation

You can install the most recent stable version of `tna` from [CRAN](https://cran.r-project.org/package=tna) or the development version from [GitHub](https://github.com/) by running one of the following:

```{r, eval = FALSE}
install.packages("tna")

# install.packages("devtools")
# devtools::install_github("sonsoleslp/tna")
```

## Example

Load the package
```{r, echo=FALSE}
suppressPackageStartupMessages(library("tna"))
```
```{r, eval=FALSE}
library("tna")
```

Example data
```{r}
data("group_regulation", package = "tna")
```

Build a Markov model
```{r}
tna_model <- tna(group_regulation)
```

```{r, eval=FALSE}
summary(tna_model)
```
```{r, echo=FALSE}
summary(tna_model) |>
  gt::gt() |>
  gt::fmt_number(decimals = 2) |>
  gt::as_raw_html()
```

Plot the transition network
```{r tnaplot}
# Default plot
plot(tna_model) 
# Optimized plot
plot(
  tna_model, cut = 0.2, minimum = 0.05, 
  edge.label.position = 0.8, edge.label.cex = 0.7
)
```
Calculate the centrality measures
```{r}
cent <- centralities(tna_model)
```

```{r, echo=FALSE}
cent |>
  gt::gt() |>
  gt::tab_options(table.font.size = 8) |>
  gt::fmt_number(decimals = 3) |>
  gt::as_raw_html()
```

Plot the centrality measures

```{r centralitiesplot, fig.width=12, fig.height=8, out.width="90%"}
plot(cent, ncol = 3)
```

Estimate centrality stability
```{r}
estimate_centrality_stability(tna_model)
```

Identify and plot communities
```{r}
coms <- communities(tna_model)
plot(coms)
```

Find and plot cliques
```{r, eval = F}
cqs <- cliques(tna_model, threshold = 0.12)
plot(cqs)
```

```{r, out.width="100%", fig.width=6, fig.height=2, echo = FALSE}
layout(t(1:3))
cqs <- cliques(tna_model, threshold = 0.12)
plot(cqs, vsize = 30, edge.label.cex = 3)
```

Compare high achievers (first 1000) with low achievers (last 1000)
```{r}
tna_model_start_high <- tna(group_regulation[1:1000, ])
tna_model_start_low <- tna(group_regulation[1001:2000, ])
comparison <- permutation_test(
  tna_model_start_high, 
  tna_model_start_low,
  measures = c("InStrength")
)
```

Simple comparison vs. permutation test comparison
```{r, fig.width=10, fig.height=5, out.width="100%", echo = 2:3}
layout(t(1:2))
plot_compare(tna_model_start_high, tna_model_start_low)
plot(comparison)
```

Compare centralities
```{r, eval = FALSE}
print(comparison$centralities$stats)
```

```{r, echo = FALSE}
comparison$centralities$stats |>
  gt::gt() |>
  gt::as_raw_html()
```



# Papers using TNA

* Saqr, M., Lopez-Pernas, S., Tormanen, T., Kaliisa, R., Misiejuk, K., & Tikka, S. (2025). Transition Network Analysis: A Novel Framework for Modeling, Visualizing, and Identifying the Temporal Patterns of Learners and Learning Processes. Proceedings of the 15th International Learning Analytics and Knowledge Conference (LAK ’25), 351–361. ACM. https://doi.org/10.1145/3706468.3706513
* Tikka, S., Lopez-Pernas, S., & Saqr, M. (2025). tna: An R Package for Transition Network Analysis. Applied Psychological Measurement (online ahead of print). doi:10.1177/01466216251348840
* López-Pernas, S., Misiejuk, K., Kaliisa, R., & Saqr, M. (2025). Capturing the process of students’ AI interactions when creating and learning complex network structures. IEEE Transactions on Learning Technologies, 1–13. https://doi.org/10.1109/tlt.2025.3568599
* Törmänen, T., Saqr, M., López-Pernas, S., Mänty, K., Suoraniemi, J., Heikkala, N., & Järvenoja, H. (2025). Emotional dynamics and regulation in collaborative learning. Learning and Instruction, 100, 102188. https://doi.org/10.1016/j.learninstruc.2025.102188
* López-Pernas, S., Misiejuk, K., Oliveira, E., & Saqr, M. (2025). The dynamics of the self-regulation process in student-AI interactions: The case of problem-solving in programming education. Proceedings of the 25th Koli Calling International Conference on Computing Education Research, 1–12. https://doi.org/10.1145/3769994.3770043
* Misiejuk, K., Kaliisa, R., Lopez-Pernas, S., & Saqr, M. (2026). Expanding the Quantitative Ethnography Toolkit with Transition Network Analysis: Exploring Methodological Synergies and Boundaries. In Advances in Quantitative Ethnography. ICQE 2025, CCIS vol. 2677. Springer. https://doi.org/10.1007/978-3-032-12229-2_10
* Lopez-Pernas, S., Misiejuk, K., Tikka, S., & Saqr, M. (2026). Role Dynamics in Student-AI Collaboration: A Heterogeneous Transition Network Analysis Approach. SSRN preprint. https://doi.org/10.2139/ssrn.6082190
