<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Attention TNA • tna</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Attention TNA">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tna</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/tna.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/atna.html">Attention TNA</a></li>
    <li><a class="dropdown-item" href="../articles/communities_and_cliques.html">Finding cliques and communities with tna</a></li>
    <li><a class="dropdown-item" href="../articles/complete_tutorial.html">A showcase of the main tna functions</a></li>
    <li><a class="dropdown-item" href="../articles/ftna.html">Frequency-based tna</a></li>
    <li><a class="dropdown-item" href="../articles/grouped_sequences.html">Using grouped sequence data with tna</a></li>
    <li><a class="dropdown-item" href="../articles/new-docs.html">tna — R Package Documentation</a></li>
    <li><a class="dropdown-item" href="../articles/prepare_data.html">How to prepare data for tna</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sonsoleslp/tna/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Attention TNA</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sonsoleslp/tna/blob/main/vignettes/articles/atna.Rmd" class="external-link"><code>vignettes/articles/atna.Rmd</code></a></small>
      <div class="d-none name"><code>atna.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="what-problem-does-atna-solve">What Problem Does ATNA Solve?<a class="anchor" aria-label="anchor" href="#what-problem-does-atna-solve"></a>
</h2>
<p>Regular TNA looks at pairs of states that happen one right after the
other. If a student does Plan at time 3 and Monitor at time 4, TNA
counts that as a transition. But it ignores the relationship between
Plan at time 3 and Adapt at time 7. Those two events are four steps
apart, so TNA treats them as unrelated.</p>
<p>That is a problem when earlier events still matter later on. A
student who plans at the start of a session is still influenced by that
planning when they adapt several steps later. A user’s first prompt in a
chatbot conversation shapes the responses several turns down the line.
In these cases, the connection between two events is real — it’s just
not immediate.</p>
<p>ATNA fills this gap. Instead of only counting adjacent transitions,
it looks at <em>all</em> pairs of states across the whole sequence and
weights them by how far apart they are. Close events get high weight.
Distant events get low weight. The weight drops off following an
exponential curve, so nearby things matter a lot and far-away things
matter a little — but they still matter.</p>
<hr>
</div>
<div class="section level2">
<h2 id="the-intuition">The Intuition<a class="anchor" aria-label="anchor" href="#the-intuition"></a>
</h2>
<p>Take this sequence of student actions:</p>
<pre><code>Plan → Monitor → Discuss → Emotion → Adapt → Monitor → Plan</code></pre>
<p>Regular TNA draws a line between each pair of neighbors:
Plan→Monitor, Monitor→Discuss, Discuss→Emotion, and so on. Seven events
produce six edges.</p>
<p>ATNA draws lines between <em>every</em> pair, but with decreasing
weight:</p>
<ul>
<li>Plan→Monitor (1 step apart): strong connection</li>
<li>Plan→Discuss (2 steps apart): weaker</li>
<li>Plan→Emotion (3 steps apart): weaker still</li>
<li>Plan→Adapt (4 steps apart): faint</li>
<li>Plan→Monitor (5 steps apart): very faint</li>
<li>Plan→Plan (6 steps apart): barely there</li>
</ul>
<p>It does this starting from every event in the sequence. All these
weighted connections get added up across every sequence in the data. The
result is a weight matrix where each cell captures how often state A
appears before state B, weighted by how close together they tend to
be.</p>
<hr>
</div>
<div class="section level2">
<h2 id="building-an-atna-model">Building an ATNA Model<a class="anchor" aria-label="anchor" href="#building-an-atna-model"></a>
</h2>
<p>If you’ve used <code><a href="../reference/build_model.html">tna()</a></code> before, this works the same way
with a different function name.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="st"><a href="https://github.com/sonsoleslp/tna/" class="external-link">"tna"</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"group_regulation"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">model_atna</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/build_model.html">atna</a></span><span class="op">(</span><span class="va">group_regulation</span>, scaling <span class="op">=</span> <span class="st">"minmax"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">model_atna</span><span class="op">)</span></span>
<span><span class="co">#&gt; State Labels : </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;    adapt, cohesion, consensus, coregulate, discuss, emotion, monitor, plan, synthesis </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Edge Weight Matrix :</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;             adapt cohesion consensus coregulate discuss emotion monitor  plan</span></span>
<span><span class="co">#&gt; adapt      0.0000    0.045     0.092      0.013   0.019   0.024  0.0076 0.022</span></span>
<span><span class="co">#&gt; cohesion   0.0035    0.029     0.309      0.084   0.076   0.087  0.0270 0.145</span></span>
<span><span class="co">#&gt; consensus  0.0263    0.085     0.407      0.418   0.513   0.260  0.1415 1.000</span></span>
<span><span class="co">#&gt;            synthesis</span></span>
<span><span class="co">#&gt; adapt       0.000076</span></span>
<span><span class="co">#&gt; cohesion    0.005746</span></span>
<span><span class="co">#&gt; consensus   0.041905</span></span>
<span><span class="co">#&gt;  [ reached 'max' / getOption("max.print") -- omitted 6 rows ]</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Initial Probabilities : </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;      adapt   cohesion  consensus coregulate    discuss    emotion    monitor </span></span>
<span><span class="co">#&gt;      0.011      0.060      0.214      0.019      0.175      0.151      0.144 </span></span>
<span><span class="co">#&gt;       plan  synthesis </span></span>
<span><span class="co">#&gt;      0.204      0.019</span></span></code></pre></div>
<p>You get a weight matrix and initial probabilities, just like regular
TNA. The difference is in what the weights represent. In TNA, they are
transition probabilities (they add up to 1 per row). In ATNA, they are
accumulated attention weights across all temporal distances, scaled to
the 0–1 range by the <code>scaling = "minmax"</code> argument.</p>
<hr>
</div>
<div class="section level2">
<h2 id="plotting-the-network">Plotting the Network<a class="anchor" aria-label="anchor" href="#plotting-the-network"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">model_atna</span>, minimum <span class="op">=</span> <span class="fl">0.05</span>, cut <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-3-1.png" class="r-plt" alt="" width="100%"></p>
<p>This produces the same style of network graph you get from
<code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> on a regular TNA model. Nodes are states, edges are
weighted connections, and thicker arrows mean stronger
relationships.</p>
<p>The difference is what the arrows mean. In a regular TNA plot, a
thick arrow from Plan to Monitor means “when Plan happens, Monitor tends
to come next.” In an ATNA plot, a thick arrow from Plan to Monitor means
“when Plan happens, Monitor tends to show up somewhere afterward — not
just in the very next step, but across the whole sequence, weighted by
distance.”</p>
<p>The <code>minimum</code> argument hides edges below that weight. The
<code>cut</code> argument removes edges that are too weak to be
meaningful. Raising these values thins out the network so you can focus
on the strongest connections. Start with <code>minimum = 0.05</code> and
adjust from there.</p>
<p>You can also look at the distribution of edge weights:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">model_atna</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-4-1.png" class="r-plt" alt="" width="100%"></p>
<p>This histogram shows how the attention weights are spread out. If
most weights cluster near zero with a few high ones, the network has a
clear backbone of strong connections. If weights are spread evenly, the
network is more diffuse and harder to interpret — you may want to prune
it more aggressively.</p>
<hr>
</div>
<div class="section level2">
<h2 id="centrality-analysis">Centrality Analysis<a class="anchor" aria-label="anchor" href="#centrality-analysis"></a>
</h2>
<p>Centrality tells you which states play the biggest role in the
network.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cents</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/centralities.html">centralities</a></span><span class="op">(</span><span class="va">model_atna</span>, normalize <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cents</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 9 × 10</span></span></span>
<span><span class="co">#&gt;   state      OutStrength InStrength ClosenessIn ClosenessOut Closeness Betweenness</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>            <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> adapt           0          0            0           0          0           0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> cohesion        0.228      0.224        0.198       0.512      0.443       0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> consensus       1          1            1           1          1           1    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> coregulate      0.279      0.301        0.615       0.380      0.507       0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> discuss         0.548      0.536        0.775       0.828      0.894       0.457</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> emotion         0.421      0.405        0.452       0.684      0.575       0.2  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">7</span> monitor         0.180      0.136        0.221       0.283      0.272       0    </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">8</span> plan            0.714      0.724        0.868       0.910      0.841       0.486</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">9</span> synthesis       0.027<span style="text-decoration: underline;">8</span>     0.032<span style="text-decoration: underline;">5</span>       0.213       0.071<span style="text-decoration: underline;">2</span>     0.181       0    </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: BetweennessRSP &lt;dbl&gt;, Diffusion &lt;dbl&gt;, Clustering &lt;dbl&gt;</span></span></span></code></pre></div>
<p>This gives you three measures for each state:</p>
<ul>
<li>
<strong>InStrength</strong>: how much attention flows <em>into</em>
this state from other states. A state with high InStrength is a common
destination — other events tend to be followed by it, even several steps
later.</li>
<li>
<strong>OutStrength</strong>: how much attention flows <em>out</em>
of this state toward other states. A state with high OutStrength has a
long reach — when it happens, it shapes what comes after it across
multiple future steps.</li>
<li>
<strong>Betweenness</strong>: how often this state sits on the
shortest path between other states. A state with high betweenness acts
as a bridge connecting different parts of the network.</li>
</ul>
<p>To plot all three:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cents</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-6-1.png" class="r-plt" alt="" width="100%"></p>
<p>This makes a bar chart with states on the x-axis and centrality
scores on the y-axis, one panel per measure.</p>
<p>Reading the results: compare what ATNA centralities tell you against
what you’d get from regular TNA. A state might have low OutStrength in
TNA (it doesn’t strongly predict the very next step) but high
OutStrength in ATNA (it has a broad, lasting influence across many
future steps). That kind of state matters more than a first-order
analysis would suggest.</p>
<hr>
</div>
<div class="section level2">
<h2 id="patterns-communities-and-cliques">Patterns: Communities and Cliques<a class="anchor" aria-label="anchor" href="#patterns-communities-and-cliques"></a>
</h2>
<div class="section level3">
<h3 id="communities">Communities<a class="anchor" aria-label="anchor" href="#communities"></a>
</h3>
<p>Communities are groups of states that are more tightly connected to
each other than to the rest of the network.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">comms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/communities.html">communities</a></span><span class="op">(</span><span class="va">model_atna</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">comms</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-7-1.png" class="r-plt" alt="" width="100%"></p>
<p>The plot colors each community differently and draws the network with
community boundaries visible. States within the same community tend to
co-occur in temporal proximity — they form clusters of related
activity.</p>
<p>In ATNA, communities can look different from what you’d find in
regular TNA, because ATNA captures longer-range relationships. Two
states that rarely follow each other directly but often appear within a
few steps of each other can end up in the same community under ATNA even
though TNA would put them in separate ones.</p>
</div>
<div class="section level3">
<h3 id="cliques">Cliques<a class="anchor" aria-label="anchor" href="#cliques"></a>
</h3>
<p>Cliques are small groups of states where every state has a strong
connection to every other state in the group.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/layout.html" class="external-link">layout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/t.html" class="external-link">t</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>mar <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">cliq</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cliques.html">cliques</a></span><span class="op">(</span><span class="va">model_atna</span>, size <span class="op">=</span> <span class="fl">2</span>, threshold<span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">cliq</span><span class="op">)</span></span>
<span><span class="co">#&gt; Number of 2-cliques = 3 (weight threshold = 0.2)</span></span>
<span><span class="co">#&gt; Showing 3 cliques starting from clique number 1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Clique 1</span></span>
<span><span class="co">#&gt;           consensus emotion</span></span>
<span><span class="co">#&gt; consensus      0.41    0.26</span></span>
<span><span class="co">#&gt; emotion        0.39    0.11</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Clique 2</span></span>
<span><span class="co">#&gt;           consensus plan</span></span>
<span><span class="co">#&gt; consensus      0.41 1.00</span></span>
<span><span class="co">#&gt; plan           0.77 0.97</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Clique 3</span></span>
<span><span class="co">#&gt;           consensus discuss</span></span>
<span><span class="co">#&gt; consensus      0.41    0.51</span></span>
<span><span class="co">#&gt; discuss        0.54    0.33</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cliq</span>, vsize <span class="op">=</span> <span class="fl">20</span>, edge.label.cex <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-8-1.png" class="r-plt" alt="" width="100%"></p>
<p>The <code>size</code> argument sets the minimum clique size (2 means
pairs, 3 means triangles, etc.). The <code>threshold</code> argument
sets the minimum edge weight needed for two states to count as
connected.</p>
<p>In ATNA, a clique means those states all have strong long-range
attention toward each other. A 3-clique of {Plan, Monitor, Adapt} means
that whenever any one of those three shows up, the other two tend to
appear nearby (within the attention window), no matter the exact step
distance.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="validation">Validation<a class="anchor" aria-label="anchor" href="#validation"></a>
</h2>
<p>Before interpreting results, check that they are stable.</p>
<div class="section level3">
<h3 id="bootstrap">Bootstrap<a class="anchor" aria-label="anchor" href="#bootstrap"></a>
</h3>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bootstrap.html">bootstrap</a></span><span class="op">(</span><span class="va">model_atna</span>, threshold <span class="op">=</span> <span class="fl">0.05</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">boot</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-9-1.png" class="r-plt" alt="" width="100%"></p>
<p>This resamples your sequences, rebuilds the model each time, and
checks how often each edge exceeds the threshold. Edges that appear in a
high percentage of bootstrap samples (say 95%+) are stable. Edges that
come and go are not reliable.</p>
</div>
<div class="section level3">
<h3 id="centrality-stability">Centrality Stability<a class="anchor" aria-label="anchor" href="#centrality-stability"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">stab</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/estimate_centrality_stability.html">estimate_centrality_stability</a></span><span class="op">(</span><span class="va">model_atna</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">stab</span><span class="op">)</span></span>
<span><span class="co">#&gt; Centrality Stability Coefficients</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  InStrength OutStrength Betweenness </span></span>
<span><span class="co">#&gt;         0.9         0.9         0.9</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">stab</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-10-1.png" class="r-plt" alt="" width="100%"></p>
<p>This drops increasing fractions of your data and recalculates
centrality each time. The stability coefficient tells you how much data
you can lose before the centrality rankings start to change. A
coefficient above 0.5 is generally considered stable. Below that, your
centrality rankings may not hold up with less data.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="group-comparisons">Group Comparisons<a class="anchor" aria-label="anchor" href="#group-comparisons"></a>
</h2>
<div class="section level3">
<h3 id="building-group-models">Building Group Models<a class="anchor" aria-label="anchor" href="#building-group-models"></a>
</h3>
<p>To compare groups (e.g., high- vs. low-achieving students), use
<code><a href="../reference/group_model.html">group_atna()</a></code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"group_regulation_long"</span><span class="op">)</span></span>
<span><span class="va">prepared</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/prepare_data.html">prepare_data</a></span><span class="op">(</span></span>
<span>  <span class="va">group_regulation_long</span>,</span>
<span>  actor <span class="op">=</span> <span class="st">"Actor"</span>,</span>
<span>  time <span class="op">=</span> <span class="st">"Time"</span>,</span>
<span>  action <span class="op">=</span> <span class="st">"Action"</span> </span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">gtna</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/group_model.html">group_atna</a></span><span class="op">(</span><span class="va">prepared</span>, group <span class="op">=</span> <span class="st">"Achiever"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting-group-networks">Plotting Group Networks<a class="anchor" aria-label="anchor" href="#plotting-group-networks"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">gtna</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-12-1.png" class="r-plt" alt="" width="100%"></p>
<p>This puts the network for each group side by side. You can visually
compare which edges are thick or thin in each group. If one group has a
strong Plan→Monitor connection and the other doesn’t, that difference
will be visible.</p>
</div>
<div class="section level3">
<h3 id="comparing-centralities-across-groups">Comparing Centralities Across Groups<a class="anchor" aria-label="anchor" href="#comparing-centralities-across-groups"></a>
</h3>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu"><a href="../reference/centralities.html">centralities</a></span><span class="op">(</span><span class="va">gtna</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-13-1.png" class="r-plt" alt="" width="100%"></p>
<p>This makes centrality bar charts for each group. Look for states
where the bars are very different across groups — those are the states
whose role changes depending on group membership.</p>
</div>
<div class="section level3">
<h3 id="difference-network">Difference Network<a class="anchor" aria-label="anchor" href="#difference-network"></a>
</h3>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_compare.html">plot_compare</a></span><span class="op">(</span><span class="va">gtna</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-14-1.png" class="r-plt" alt="" width="100%"></p>
<p>This draws a single network where each edge shows the
<em>difference</em> between groups. Positive edges (one color) are
stronger in the first group; negative edges (another color) are stronger
in the second group. It is the fastest way to see where the two groups
diverge.</p>
</div>
<div class="section level3">
<h3 id="permutation-test">Permutation Test<a class="anchor" aria-label="anchor" href="#permutation-test"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">perm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/permutation_test.html">permutation_test</a></span><span class="op">(</span><span class="va">gtna</span>, iter <span class="op">=</span> <span class="fl">1000</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">perm</span><span class="op">)</span></span>
<span><span class="co">#&gt; High vs. Low :</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 81 × 4</span></span></span>
<span><span class="co">#&gt;    edge_name           diff_true effect_size  p_value</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                   <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> adapt -&gt; adapt         -<span style="color: #BB0000;">1.34</span>       -<span style="color: #BB0000;">3.18</span>  0.002<span style="text-decoration: underline;">00</span> </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> cohesion -&gt; adapt       0.907       0.895 0.373   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> consensus -&gt; adapt     -<span style="color: #BB0000;">6.92</span>       -<span style="color: #BB0000;">2.62</span>  0.015<span style="text-decoration: underline;">0</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> coregulate -&gt; adapt    -<span style="color: #BB0000;">2.40</span>       -<span style="color: #BB0000;">1.04</span>  0.311   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> discuss -&gt; adapt      -<span style="color: #BB0000;">83.7</span>       -<span style="color: #BB0000;">11.4</span>   0.000<span style="text-decoration: underline;">999</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> emotion -&gt; adapt       -<span style="color: #BB0000;">0.777</span>      -<span style="color: #BB0000;">0.598</span> 0.563   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> monitor -&gt; adapt       -<span style="color: #BB0000;">5.27</span>       -<span style="color: #BB0000;">3.04</span>  0.000<span style="text-decoration: underline;">999</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> plan -&gt; adapt          -<span style="color: #BB0000;">5.68</span>       -<span style="color: #BB0000;">3.59</span>  0.000<span style="text-decoration: underline;">999</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> synthesis -&gt; adapt    -<span style="color: #BB0000;">27.6</span>        -<span style="color: #BB0000;">5.84</span>  0.000<span style="text-decoration: underline;">999</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> adapt -&gt; cohesion     -<span style="color: #BB0000;">25.7</span>        -<span style="color: #BB0000;">5.87</span>  0.000<span style="text-decoration: underline;">999</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 71 more rows</span></span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">perm</span>, minimum <span class="op">=</span> <span class="fl">0.01</span><span class="op">)</span></span></code></pre></div>
<p><img src="atna_files/figure-html/unnamed-chunk-15-1.png" class="r-plt" alt="" width="100%"></p>
<p>This tests whether the observed differences between groups are bigger
than what you’d expect by chance. It shuffles the group labels 1000
times, recomputes the group models each time, and compares the real
difference to the shuffled differences. Edges with small p-values are
where the two groups differ in a way that is unlikely to be random.</p>
<p>The plot shows the network of significant differences. Only edges
that passed the permutation test are visible.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="when-to-use-atna-vs--regular-tna">When to Use ATNA vs. Regular TNA<a class="anchor" aria-label="anchor" href="#when-to-use-atna-vs--regular-tna"></a>
</h2>
<table class="table">
<colgroup>
<col width="68%">
<col width="31%">
</colgroup>
<thead><tr class="header">
<th>Situation</th>
<th>Use</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>You care about what happens in the very next step</td>
<td><code><a href="../reference/build_model.html">tna()</a></code></td>
</tr>
<tr class="even">
<td>You think events influence other events several steps later</td>
<td><code><a href="../reference/build_model.html">atna()</a></code></td>
</tr>
<tr class="odd">
<td>Conversational data where early turns shape later turns</td>
<td><code><a href="../reference/build_model.html">atna()</a></code></td>
</tr>
<tr class="even">
<td>You want to find states that connect distant parts of the
sequence</td>
<td><code><a href="../reference/build_model.html">atna()</a></code></td>
</tr>
</tbody>
</table>
<p>ATNA and TNA can give different answers about which states are most
central. A state might have weak immediate transitions (low importance
in TNA) but strong long-range influence (high importance in ATNA). If
the two methods agree on what matters, that’s good evidence the finding
is solid. If they disagree, the disagreement itself is informative — it
tells you the state’s role depends on the time scale you’re looking
at.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://saqr.me" class="external-link">Mohammed Saqr</a>, <a href="http://users.jyu.fi/~santikka/" class="external-link">Santtu Tikka</a>, <a href="https://sonsoles.me" class="external-link">Sonsoles López-Pernas</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
